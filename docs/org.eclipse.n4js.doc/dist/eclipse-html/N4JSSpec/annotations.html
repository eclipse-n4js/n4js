<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<meta name="author" content="2019-01-11 12:16:48 CET">
<title>N4JS Language Specification</title>
<link rel="stylesheet" href="styles/eclipse-help-mode-spec.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<!-- ************* Meta ************* -->
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<!-- ************* OpenGraph ************-->
<meta name="description" content="N4JS Language Specification">

<!-- ************* Favicon ************-->
<link rel="icon" href="images/favicon.ico" />

<!-- ************* Back-to-top JQuery ************* -->
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>

<link href="styles/prism.min.css" rel="stylesheet" />

<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=MML_CHTML">
</script>
<style>
      .admonitionblock td.icon .icon-todo:before{content:"\f249";color:#f4ee42}
    </style>
</head>
<body class="book"><div class="sect1">
<h2 id="_annotations"><a class="anchor" href="#_annotations"></a><a class="link" href="#_annotations">10. Annotations</a></h2>
<div class="sectionbody">
<div class="sect2 language-n4js">
<h3 id="_introduction-2"><a class="anchor" href="#_introduction-2"></a><a class="link" href="#_introduction-2">10.1. Introduction</a></h3>
<div class="paragraph">
<p>Annotations are used to further define meta properties of language elements such as types, variables and functions.
These annotations are used by the compiler and validator to prohibit the developer from introducing constructs which are either not allowed or are unnecessary in certain contexts.</p>
</div>
<div class="paragraph">
<p>Since annotations are to be processed by the compiler and the compilation cannot be extended by third-party users for security reasons, annotations cannot be defined by developers.
Instead, the compiler comes with a predefined set of annotations which are summarized here.</p>
</div>
<div class="sect3">
<h4 id="_syntax-13"><a class="anchor" href="#_syntax-13"></a><a class="link" href="#_syntax-13">10.1.1. Syntax</a></h4>
<div class="paragraph">
<p>Annotations are used similarly as in Java (although new annotations cannot be defined by the user).
They are formally defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xtext" data-lang="xtext">Annotation:'@' AnnotationNoAtSign;
ScriptAnnotation returns Annotation: '@@' AnnotationNoAtSign;

AnnotationNoAtSign returns Annotation:
    name=AnnotationName (=&gt; '(' (args+=AnnotationArgument (',' args+=AnnotationArgument)*)? ')')?;

AnnotationArgument:
    LiteralAnnotationArgument | TypeRefAnnotationArgument
;

LiteralAnnotationArgument:
    literal=Literal
;

TypeRefAnnotationArgument:
    typeRef=TypeRef
;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_properties-7"><a class="anchor" href="#_properties-7"></a><a class="link" href="#_properties-7">10.1.2. Properties</a></h4>
<div class="paragraph">
<p>We use the map notation for retrieving annotation properties and values from a list of annotations,
for example <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mo>.</mo><mi>a</mi><mi>n</mi><mi>n</mi><mi>o</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi><mfenced close="]" open="["><mrow><mi>R</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>i</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></mfenced></math>, or shorter <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mi>@</mi><mi>R</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>i</mi><mi>r</mi><mi>e</mi><mi>d</mi></math>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="_element-specific-annotations"><a class="anchor" href="#_element-specific-annotations"></a><a class="link" href="#_element-specific-annotations">10.1.3. Element-Specific Annotations</a></h4>
<div class="paragraph">
<p>The following annotations are element-specific and are explained in the corresponding sections:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 11. Element-Specific Annotations</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Annotation</th>
<th class="tableblock halign-center valign-top">Element Types</th>
<th class="tableblock halign-left valign-top">Section</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Internal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TypeDefiningElement, Member, Function, Export</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="names.html#_access-control">Access Control</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Undefined</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Variable</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="types.html#_undefined-type">Undefined Type</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@StringBased</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Enum</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="types.html#_string-based-enums">String-Based Enums</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Final</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Class, Member</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="classifiers.html#_final-methods">Final Methods</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Spec</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FPar</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="classifiers.html#Req-IDE-59">[Req-IDE-59]</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Override</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Method</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="classifiers.html#_redefinition-of-members">Redefinition of Members</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Promisifiable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Function</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="functions.html#_promisifiable-functions">Promisifiable Functions</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Promisify</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CallExpression</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="functions.html#_promisifiable-functions">Promisifiable Functions</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@This</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Function</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="grammar.html#_this-keyword">This Keyword</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@N4JS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Class, Export Statement</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="plainjs.html#_external-declarations">External Declarations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@IgnoreImplementation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Script, ExportDeclaration, ExportableElement</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="plainjs.html#_external-declarations">External Declarations</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Global</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>External Declaration</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="plainjs.html#_global-definitions">Global Definitions</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@ProvidedByRuntime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>External Declaration</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="plainjs.html#_runtime-definitions">Runtime Definitions</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@TestAPI</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TypeDefiningElement, Member</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="extended_fetaures.html#_test-support">Test Support</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Polyfill</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Class</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="extended_fetaures.html#_polyfill-definitions">Polyfill Definitions</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@StaticPolyfill</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Class</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="extended_fetaures.html#_static-polyfill-definitions">Static Polyfill Definitions</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@StaticPolyfillAware</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Script</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="extended_fetaures.html#_static-polyfill-definitions">Static Polyfill Definitions</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@StaticPolyfillModule</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Script</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="extended_fetaures.html#_static-polyfill-definitions">Static Polyfill Definitions</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Transient</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Field</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="appendix_b_bibliography.html#_footnote_1" title="View footnote.">1</a>]</sup></p>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnote_1">
<a href="#_footnoteref_1">1</a>. intended for internal use only; will be removed
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_general-annotations"><a class="anchor" href="#_general-annotations"></a><a class="link" href="#_general-annotations">10.1.4. General Annotations</a></h4>
<div class="sect4">
<h5 id="_idebug"><a class="anchor" href="#_idebug"></a><a class="link" href="#_idebug">10.1.4.1. IDEBUG</a></h5>
<div class="paragraph">
<p><code>@IDEBUG</code> is an annotation similar to Java’s <code>@SuppressWarnings</code>.
It changes the severity of an issue from an error to a warning so that code can be compiled regardless of validation errors.
This is to be used for known IDE bugs only.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="idebug-syntax"><a class="anchor" href="#idebug-syntax"></a><a class="link" href="#idebug-syntax">10.1.5. Syntax</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xtext" data-lang="xtext">'@IDEBUG' '(' bugID = INT ',' errorMessage=STRING ')'</code></pre>
</div>
</div>
<div class="paragraph">
<p>The annotation is defined transitively and repeatable on script, type declaration, function and method level.</p>
</div>
<div class="sect4">
<h5 id="_semantics-11"><a class="anchor" href="#_semantics-11"></a><a class="link" href="#_semantics-11">10.1.5.1. Semantics</a></h5>
<div class="paragraph">
<p>This annotation will cause errors issued in the scope of the annotation (in the defined script, type, or method) to be transformed to warnings if their message text is similar to the <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mi>M</mi><mi>e</mi><mi>s</mi><mi>s</mi><mi>a</mi><mi>g</mi><mi>e</mi></math> text.
If <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mi>M</mi><mi>e</mi><mi>s</mi><mi>s</mi><mi>a</mi><mi>g</mi><mi>e</mi></math> ends with <code>…</code> (three dots as a single character, created by Eclipse to abbreviate messages), then the error’s message text must start with the specified text.</p>
</div>
<div class="paragraph">
<p>If no matching error is found, the annotation itself will issue an error.</p>
</div>
<div id="ex:IDEBUG" class="exampleblock">
<div class="title">Example 97. IDEBUG Example</div>
<div class="content">
<div class="paragraph">
<p>In the following code snippet, two errors are to be transformed to warnings.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-n4js" data-lang="n4js">export class TestDataBridge with IModuleTest {
    @IDEBUG(166, "{function(number):void} is not a subtype of {function(T):void}.") <i class="conum" data-value="1"></i><b>(1)</b>
    @IDEBUG(91, "Incorrect number of arguments: expected 1, got 2.") <i class="conum" data-value="2"></i><b>(2)</b>
    @Override public run(): void {
        var foo = new Foo(),
            cb = function(val: number): void {},
            db = DataBridge.&lt;number&gt;bind(foo, "bar");
        db.add(cb); <i class="conum" data-value="3"></i><b>(3)</b>
        Assert.isTrue(called);
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The annotation transforms the error <code>{function(number):void} is not a subtype of {function(T):void}</code> into a warning with the following text:</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This annotation was proposed as a workaround for <a href="https://github.com/NumberFour/n4js/issues/91">IDEBUG-91</a> which has been fixed.<br>
No error message is produced and an error will be issued on this line instead:</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The first error occurs since there is a bug in the IDE type system (as of writing this example) where type arguments are not correctly bound in the case of function expressions used as callback methods.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_suppress-warnings"><a class="anchor" href="#_suppress-warnings"></a><a class="link" href="#_suppress-warnings">10.1.5.2. Suppress Warnings</a></h5>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title=""></i>
</td>
<td class="content">
This is not part of the current version
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_declaration-of-annotations"><a class="anchor" href="#_declaration-of-annotations"></a><a class="link" href="#_declaration-of-annotations">10.2. Declaration of Annotations</a></h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title=""></i>
</td>
<td class="content">
This is not part of the current version
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.4<br>
Last updated 2019-01-11 12:16:48 CET
</div>
</div>
<!-- ************* UI Scripts ************* -->
<script type="text/javascript" src="scripts/back-to-top.js"></script>

<!-- ************* Prism.js Syntax Highlighting ************* -->
<script src="scripts/prism.js"></script>
</body>
</html>