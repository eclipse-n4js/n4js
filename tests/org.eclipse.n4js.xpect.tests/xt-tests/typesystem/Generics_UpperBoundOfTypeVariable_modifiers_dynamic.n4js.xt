/*
 * Copyright (c) 2021 NumberFour AG.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *   NumberFour AG - Initial API and implementation
 */

/* XPECT_SETUP org.eclipse.n4js.xpect.tests.N4JSXpectTest END_SETUP */


interface ~I<T> {
    public value: T;
    public valueD: T+;
}

class G<T> {
    field: T;
    fieldD: T+;
    m(p: T, pd: T+) {
		// XPECT errors --> "Couldn't resolve reference to IdentifiableElement 'prop'." at "prop"
        p.prop;
		// XPECT noerrors -->
        pd.prop;

        let i: I<T>;
		// XPECT errors --> "Couldn't resolve reference to IdentifiableElement 'prop'." at "prop"
        i.value.prop;
		// XPECT noerrors -->
        i.valueD.prop;

        let id: I<T+>;
		// XPECT noerrors -->
        id.value.prop;
		// XPECT noerrors -->
        id.valueD.prop;
    }
}

// XPECT errors --> "Couldn't resolve reference to IdentifiableElement 'prop'." at "prop"
new G<Object>().field.prop;
// XPECT noerrors -->
new G<Object>().fieldD.prop;

// XPECT noerrors -->
new G<Object+>().field.prop;
// XPECT noerrors -->
new G<Object+>().fieldD.prop;
