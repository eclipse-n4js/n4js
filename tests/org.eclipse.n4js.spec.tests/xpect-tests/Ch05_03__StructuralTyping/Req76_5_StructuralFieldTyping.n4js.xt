/*
 * Copyright (c) 2016 NumberFour AG.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *   NumberFour AG - Initial API and implementation
 */

class T {
	public n : number;

	private pn : number;
	private pfoo() {}

	public static SN : number;
	public static SFOO() {}
}

class X {
	public n : number;
	public foo() {}

	public s : string;
}

class Y {
	public n : number;
	public s : string;
}

class Z {
	public s : string;
	public foo() {}
}

var ol = {
	n: 10,
	foo: function() {},
	s: "hello"
}

var ol2 = {
	foo: function() {},
	s: "hello"
}

var t : ~~T;
var x : ~~X;
var y : ~~Y;
var z : ~~Z;

// XPECT noerrors -->
t = x;
// XPECT errors --> "~~T is not a structural subtype of ~~X: missing field s." at "t"
x = t;

// XPECT noerrors -->
t = y;
// XPECT errors --> "~~T is not a structural subtype of ~~Y: missing field s." at "t"
y = t;

// XPECT errors --> "~~Z is not a structural subtype of ~~T: missing field n." at "z"
t = z;
// XPECT errors --> "~~T is not a structural subtype of ~~Z: missing field s." at "t"
z = t;


// XPECT noerrors -->
t = ol;

// XPECT errors --> "~Object with { foo: {function():void}; s: string } is not a structural subtype of ~~T: missing field n." at "ol2"
t = ol2;
